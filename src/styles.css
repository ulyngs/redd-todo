/* Reset and base styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: #333;
    overflow: hidden;
}

/* App Container */
.app-container {
    width: 100vw;
    height: 100vh;
    display: flex;
    flex-direction: column;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border-radius: 12px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    padding-top: 4px;
    /* Added some top padding */
    padding-bottom: 42px;
    /* Space for fixed footer */
    overflow: hidden;
    /* Prevent app-wide scroll */
}

/* Normal Mode UI wrapper */
#normal-mode {
    display: flex;
    flex-direction: column;
    height: 100%;
    overflow: hidden;
}

/* Title Bar */
.title-bar {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 6px 16px 8px 16px;
    background: transparent;
    -webkit-app-region: drag;
    cursor: move;
    position: relative;
    flex-shrink: 0;
}

.title {
    display: none;
}

/* View Switcher */
.view-switcher {
    display: flex;
    align-items: center;
    background: transparent;
    /* Removed background */
    border-radius: 6px;
    padding: 2px;
    margin: 0;
    /* Centered by flex parent */
    -webkit-app-region: no-drag;
}

.view-btn {
    width: 24px;
    height: 24px;
    border: none;
    background: transparent;
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #ccc;
    /* Lighter gray for inactive state */
    transition: all 0.2s ease;
    padding: 0;
}

.view-btn:hover {
    color: #666;
    background: transparent;
    /* Removed hover background */
}

.view-btn.active {
    background: transparent;
    /* Removed active background */
    color: #333;
    box-shadow: none;
    /* Removed active shadow */
}

/* Ensure heart is always filled in switch, adjusting opacity or color if needed */
#view-fav-btn svg {
    fill: currentColor;
}

/* Window Controls */
.window-controls {
    position: absolute;
    top: 0;
    right: 0;
    height: 100%;
    display: flex;
    align-items: center;
    -webkit-app-region: no-drag;
}

.win-btn {
    width: 46px;
    height: 100%;
    /* Fill the title bar height */
    min-height: 40px;
    /* Fallback */
    border: none;
    background: transparent;
    display: flex;
    justify-content: center;
    align-items: center;
    color: #666;
    cursor: default;
    transition: background 0.1s;
}

.win-btn:hover {
    background: rgba(0, 0, 0, 0.05);
    color: #333;
}

.win-btn.close-btn:hover {
    background: #e81123;
    color: white;
}


/* Groups Container */
.groups-container {
    display: flex;
    align-items: center;
    padding: 0px 16px 0 16px;
    background: transparent;
    /* border-bottom: 1px solid rgba(0, 0, 0, 0.05); */
}

.groups {
    display: flex;
    flex: 1;
    gap: 4px;
    overflow-x: auto;
    align-items: center;
}

.group-tab {
    padding: 4px 10px;
    background: transparent;
    border-radius: 4px;
    cursor: pointer;
    font-size: 11px;
    font-weight: 600;
    white-space: nowrap;
    transition: all 0.15s ease;
    color: rgba(0, 0, 0, 0.5);
    -webkit-app-region: no-drag;
    display: flex;
    align-items: center;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.group-tab:hover {
    background: rgba(255, 255, 255, 0.2);
    color: rgba(0, 0, 0, 0.8);
}

.group-tab.active {
    background: white;
    color: #333;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.group-tab.drag-over {
    background: rgba(102, 126, 234, 0.2);
    border: 1px dashed #667eea;
}

.group-tab.dragging {
    opacity: 0.5;
    cursor: grabbing;
}

.group-delete-btn {
    margin-left: 6px;
    margin-right: -6px;
    padding: 0 -4px 0 4px;
    background: transparent;
    border: none;
    border-radius: 50%;
    color: rgba(0, 0, 0, 0.3);
    font-size: 12px;
    cursor: pointer;
    opacity: 0;
    transition: opacity 0.2s ease, color 0.2s ease;
    -webkit-app-region: no-drag;
    line-height: 1;
    width: 16px;
    height: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.group-tab:hover .group-delete-btn {
    opacity: 1;
}

.group-delete-btn:hover {
    color: #ef4444;
    background: rgba(239, 68, 68, 0.1);
}

.add-group-btn {
    width: 20px;
    height: 20px;
    border: none;
    border-radius: 4px;
    background: transparent;
    color: #999;
    font-size: 14px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    margin-left: 2px;
    -webkit-app-region: no-drag;
}

.add-group-btn:hover {
    background: rgba(0, 0, 0, 0.05);
    color: #666;
}

.tabs-container {
    display: flex;
    align-items: center;
    padding: 8px 16px 0 16px;
    background: transparent;
    border-bottom: 1px solid hsl(214, 32%, 91%);
    position: relative;
    /* For absolute positioning of settings button if needed */
}

.tabs {
    display: flex;
    flex: 1;
    gap: 2px;
    overflow-x: auto;
    align-items: center;
    margin-right: 16px;
    /* Space for settings button */
}

.settings-btn {
    /* Reset previous positioning */
    position: static;
    transform: none;
    top: auto;
    right: auto;

    /* New positioning */
    background: transparent;
    border: none;
    color: #999;
    cursor: pointer;
    padding: 4px;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    -webkit-app-region: no-drag;
    transition: all 0.2s ease;
    margin-left: auto;
    /* Push to the right */
    flex-shrink: 0;
}

.settings-btn:hover {
    background: rgba(0, 0, 0, 0.05);
    color: #333;
}

/* Remove previous conditional classes */
.settings-btn.centered-under-add,
.settings-btn.centered-under-sync {
    right: auto;
}

.tab {
    padding: 6px 8px;
    background: transparent;
    border-radius: 6px 6px 0 0;
    cursor: pointer;
    font-size: 13px;
    font-weight: 500;
    white-space: nowrap;
    transition: all 0.15s ease;
    color: rgba(0, 0, 0, 0.5);
    border-bottom: 2px solid transparent;
    position: relative;
    -webkit-app-region: no-drag;
}

.tab.dragging {
    opacity: 0.5;
    cursor: grabbing;
}

.tab.drag-over {
    background: rgba(0, 0, 0, 0.05);
}

/* Task drop target styles */
.tab.task-drop-target {
    background: rgba(102, 126, 234, 0.15);
    border-bottom: 2px solid #667eea;
}

.tab.task-drop-incompatible {
    opacity: 0.4;
    cursor: not-allowed;
}

.tab.active {
    background: transparent;
    color: hsl(222.2, 84%, 4.9%);
    border-bottom-color: hsl(222.2, 84%, 4.9%);
}

.tab:hover:not(.active) {
    background: hsl(0, 0%, 96%);
    color: rgba(0, 0, 0, 0.8);
}

.tab-close {
    margin-left: 2px;
    margin-right: -12px;
    padding: 2px 6px;
    background: rgba(255, 255, 255, 0.2);
    border: none;
    border-radius: 50%;
    color: inherit;
    font-size: 12px;
    cursor: pointer;
    opacity: 0;
    transition: opacity 0.2s ease, color 0.2s ease, background 0.2s ease;
    -webkit-app-region: no-drag;
}

.tab:hover .tab-close {
    opacity: 0.7;
}

.tab-close:hover {
    opacity: 1 !important;
    background: rgba(239, 68, 68, 0.1);
    color: #ef4444;
}

.add-tab-btn-subtle {
    width: 24px;
    height: 24px;
    border: none;
    border-radius: 4px;
    background: transparent;
    color: #999;
    font-size: 16px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    margin-left: 2px;
    -webkit-app-region: no-drag;
    flex-shrink: 0;
}

.add-tab-btn-subtle:hover {
    background: rgba(0, 0, 0, 0.05);
    color: #666;
}

/* Tasks Container */
.tasks-container {
    flex: 1 1 auto;
    padding: 16px 16px 0 16px;
    overflow-y: auto;
    position: relative;
    min-height: 0;
}

/* Task Item */
.task-item {
    display: flex;
    flex-direction: column;
    align-items: stretch;
    padding: 12px;
    margin-bottom: 8px;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    transition: all 0.2s ease;
    cursor: default;
}

.task-main-row {
    display: flex;
    align-items: center;
    width: 100%;
}

.notes-btn {
    background: transparent;
    border: none;
    color: #cbd5e1;
    cursor: pointer;
    padding: 4px;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-left: 4px;
    margin-right: 4px;
    transition: all 0.2s ease;
    opacity: 0;
    /* Hidden by default, shown on hover or if has notes */
}

.task-item:hover .notes-btn {
    opacity: 1;
}

.notes-btn:hover,
.notes-btn.active {
    background: rgba(0, 0, 0, 0.05);
    color: #64748b;
}

.notes-btn.has-notes {
    opacity: 1;
    color: #64748b;
    /* Always visible when notes exist */
}

.notes-btn.has-notes:hover {
    color: #334155;
}

.notes-container {
    margin-top: 0;
    padding-top: 0;
    max-height: 0;
    overflow: hidden;
    transition: all 0.3s ease;
    opacity: 0;
}

.notes-container.open {
    margin-top: 8px;
    padding-top: 4px;
    max-height: 500px;
    /* Animate height */
    overflow: visible;
    opacity: 1;
}

.notes-editor-wrapper {
    background: #f8fafc;
    /* Subtle light gray background */
    border: none;
    border-radius: 6px;
    overflow: visible;
    /* Allow done button to be visible */
    position: relative;
    /* For positioning the done button */
}

/* Custom Quill Styles */
.ql-toolbar.ql-snow {
    border: none !important;
    border-bottom: 1px solid #e2e8f0 !important;
    padding: 4px 8px !important;
    padding-right: 40px !important;
    /* Make room for done button */
    background: #f8fafc;
    display: none;
    /* Hidden by default */
    position: relative;
    /* For absolute positioning of done button */
}

.notes-editor-wrapper.active .ql-toolbar.ql-snow {
    display: block;
    /* Show when active */
}

/* Done button - positioned on wrapper, only visible when active */
.notes-done-btn {
    position: absolute;
    right: 8px;
    top: 6px;
    width: 24px;
    height: 24px;
    border: none;
    background: transparent;
    color: #64748b;
    /* Subtle dark grey */
    border-radius: 4px;
    cursor: pointer;
    display: none;
    /* Hidden by default */
    align-items: center;
    justify-content: center;
    z-index: 20;
}

.notes-editor-wrapper.active .notes-done-btn {
    display: flex;
    /* Show when wrapper is active */
}

.notes-done-btn:hover {
    color: #334155;
    /* Darker on hover */
    background: rgba(0, 0, 0, 0.05);
}

.ql-container.ql-snow {
    border: none !important;
    font-size: 14px !important;
    font-family: inherit !important;
}

.ql-editor {
    min-height: 60px;
    padding: 12px !important;
    color: #334155;
}

.ql-editor.ql-blank::before {
    color: #94a3b8 !important;
    font-style: normal !important;
}

.task-item[draggable="true"] {
    cursor: grab;
}

.task-item.completed-task {
    background: rgba(0, 0, 0, 0.03);
}

.task-item:hover {
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    transform: translateY(-1px);
}

.task-item.dragging {
    opacity: 0.5;
    transform: rotate(5deg);
    cursor: grabbing;
}

/* Shrunk when hovering over a different tab */
.task-item.dragging.drag-over-tab {
    opacity: 0.3;
    transform: scale(0.5) rotate(5deg);
}

/* Placeholder for task being moved to a new tab - matches existing drag style */
.task-item.task-placeholder {
    opacity: 0.5;
}

.task-item.drag-over {
    border-top: 2px solid #667eea;
    margin-top: -2px;
}

/* Bottom drag target */
.bottom-drag-target {
    height: 12px;
    margin: 0 0 4px 0;
    border-radius: 4px;
    transition: all 0.2s ease;
    position: relative;
}

.bottom-drag-target.drag-over::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 12px;
    right: 12px;
    height: 2px;
    background: #667eea;
    border-radius: 1px;
    pointer-events: none;
}

/* Drag Handle */
.drag-handle {
    color: #ccc;
    font-size: 12px;
    cursor: grab;
    margin-right: 8px;
    user-select: none;
    -webkit-app-region: no-drag;
    pointer-events: none;
}

.drag-handle:hover {
    color: #999;
}

.task-checkbox {
    width: 18px;
    height: 18px;
    margin-right: 12px;
    cursor: pointer;
    appearance: none;
    border: 1px solid hsl(214, 32%, 91%);
    border-radius: 4px;
    background: hsl(0, 0%, 100%);
    transition: all 0.15s ease;
    position: relative;
    flex-shrink: 0;
}

.task-checkbox:checked {
    background: hsl(222.2, 84%, 4.9%);
    border-color: hsl(222.2, 84%, 4.9%);
}

.task-checkbox:checked::after {
    content: '✓';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-size: 12px;
    font-weight: bold;
}

.task-checkbox:hover {
    border-color: hsl(214, 32%, 85%);
}

.task-checkbox:hover:not(:checked)::after {
    content: '✓';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: hsl(214, 32%, 80%);
    font-size: 12px;
    font-weight: bold;
}

.task-checkbox:focus {
    outline: none;
    box-shadow: 0 0 0 2px hsl(214, 32%, 85%);
}

.task-text {
    flex: 1;
    font-size: 14px;
    line-height: 1.4;
    word-wrap: break-word;
}

.task-text.completed {
    text-decoration: line-through;
    opacity: 0.6;
}

.task-meta {
    font-size: 11px;
    color: #999;
    margin-left: 8px;
    white-space: nowrap;
    flex-shrink: 0;
    cursor: pointer;
    /* Make it clear it's interactive */
}

.task-meta.add-time {
    opacity: 0;
    /* Hide by default */
    transition: opacity 0.2s ease;
    color: #ccc;
    font-weight: bold;
    padding: 0 4px;
}

.task-item:hover .task-meta.add-time {
    opacity: 1;
    /* Show on hover */
}

.task-meta.add-time:hover {
    color: #667eea;
}

.task-meta:hover {
    text-decoration: underline;
    /* Hint at editability */
}

.task-meta.actual-time {
    color: #999;
    /* Reset to default grey */
    font-weight: normal;
    cursor: pointer;
    /* Allow editing */
    text-decoration: none;
}

.task-meta.actual-time:hover {
    text-decoration: underline;
}

.task-edit-input {
    flex: 1;
    font-size: 14px;
    line-height: 1.4;
    padding: 0;
    margin: 0;
    border: none;
    background: transparent;
    font-family: inherit;
    color: inherit;
    outline: none;
    border-bottom: 1px solid #667eea;
    width: 100%;
    -webkit-app-region: no-drag;
    /* Textarea-specific styles */
    resize: none;
    overflow: hidden;
    min-height: 1.4em;
    /* Match line-height */
    display: block;
}

.task-actions {
    display: flex;
    gap: 8px;
    margin-left: 12px;
    flex-shrink: 0;
}

.focus-btn,
.delete-btn,
.fav-btn {
    padding: 4px 8px;
    border: none;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    min-width: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.focus-btn {
    background: hsl(222.2, 84%, 4.9%);
    border: 1px solid hsl(222.2, 84%, 4.9%);
    color: hsl(210, 40%, 98%);
    padding: 4px;
    transition: all 0.15s ease;
}

/* Focus indicator for the currently focused task (main window) */
.focus-btn.active-focus {
    background: rgba(0, 0, 0, 0.08);
    border-color: rgba(0, 0, 0, 0.08);
    color: #e11d48;
    /* red */
}

.focus-btn.active-focus:hover {
    background: rgba(0, 0, 0, 0.12);
    border-color: rgba(0, 0, 0, 0.12);
    color: #be123c;
}

.focus-btn:hover {
    background: hsl(222.2, 84%, 9%);
    border-color: hsl(222.2, 84%, 9%);
}

.focus-btn svg {
    display: block;
}

.delete-btn {
    background: transparent;
    border: none;
    color: #999;
    padding: 4px 6px;
    min-width: auto;
    font-size: 18px;
    line-height: 1;
}

.delete-btn:hover {
    background: rgba(239, 68, 68, 0.1);
    color: #ef4444;
}

.fav-btn {
    background: transparent;
    color: #d1d5db;
    /* Light gray */
    padding: 4px;
    min-width: 28px;
}

.fav-btn svg {
    transition: all 0.2s ease;
}

.fav-btn:hover {
    transform: scale(1.1);
    color: #9ca3af;
    /* Slightly darker on hover */
}

.fav-btn.active {
    color: #4b5563;
    /* Darker gray */
}

.fav-btn.active svg {
    fill: currentColor;
}


/* Add Task Container */
.add-task-container {
    display: flex;
    align-items: center;
    /* Ensure vertical centering */
    padding: 8px 16px;
    gap: 8px;
    flex-shrink: 0;
    background: rgba(255, 255, 255, 0.95);
    box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.02);
    position: relative;
    z-index: 5;
}

.input-wrapper {
    flex: 1;
    display: flex;
    align-items: center;
    border: 2px solid rgba(0, 0, 0, 0.1);
    border-radius: 8px;
    background: white;
    transition: border-color 0.2s ease;
    padding-right: 6px;
}

.input-wrapper:focus-within {
    border-color: #667eea;
}

#new-task-input {
    flex: 1;
    padding: 10px 12px;
    border: none;
    background: transparent;
    font-size: 14px;
    outline: none;
    border-radius: 8px 0 0 8px;
}

.duration-input-container {
    display: flex;
    align-items: center;
    width: 0;
    overflow: hidden;
    transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;
    opacity: 0;
    white-space: nowrap;
}

.duration-input-container.visible {
    width: 85px;
    /* Adjusted to fit spinners */
    opacity: 1;
}

.task-duration-input,
#task-duration-input {
    flex: 1;
    min-width: 0;
    border: none;
    background: transparent;
    text-align: right;
    font-size: 13px;
    color: #000;
    /* User wants black text when typing */
    outline: none;
    -moz-appearance: textfield;
    appearance: textfield;
    -webkit-app-region: no-drag;
}

.task-duration-input:placeholder-shown,
#task-duration-input:placeholder-shown {
    text-align: left;
}

.task-duration-input::placeholder,
#task-duration-input::placeholder {
    color: #999;
    /* Lighter placeholder */
}

.task-duration-input::-webkit-outer-spin-button,
.task-duration-input::-webkit-inner-spin-button,
#task-duration-input::-webkit-outer-spin-button,
#task-duration-input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

.task-duration-edit.duration-input-container {
    display: inline-flex;
    vertical-align: middle;
    flex-shrink: 0;
    width: auto;
    /* Override the fixed 85px from .visible */
    margin-left: 4px;
    /* Match .task-meta spacing */
}

.task-duration-edit .task-duration-input {
    width: 28px;
    /* Compact width for existing tasks (just digits + m) */
    flex: none;
    text-align: right;
}

.duration-label {
    color: #999;
    font-size: 13px;
    margin-left: 0;
    width: 0;
    overflow: hidden;
    opacity: 0;
    /* Hidden by default (when showing placeholder) */
    transition: opacity 0.2s ease, width 0.2s ease, margin-left 0.2s ease;
}

.duration-input-container.has-value .duration-label {
    width: 12px;
    margin-left: 2px;
    opacity: 1;
    /* Show "m" only when user has typed a number */
}

/* Duration Spinner Buttons */
.duration-spinners {
    display: flex;
    flex-direction: column;
    margin-left: 0;
    gap: 1px;
    width: 0;
    overflow: hidden;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s ease, width 0.2s ease, margin-left 0.2s ease;
}

.duration-input-container.has-value .duration-spinners {
    width: 16px;
    margin-left: 2px;
    opacity: 1;
    pointer-events: auto;
}

.duration-spinner-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 16px;
    height: 12px;
    padding: 0;
    border: none;
    background: rgba(0, 0, 0, 0.06);
    border-radius: 3px;
    cursor: pointer;
    color: #666;
    transition: all 0.15s ease;
}

.duration-spinner-btn:hover {
    background: rgba(0, 0, 0, 0.12);
    color: #333;
}

.duration-spinner-btn:active {
    background: rgba(0, 0, 0, 0.18);
    transform: scale(0.95);
}

.duration-spinner-btn svg {
    display: block;
}

#add-task-btn {
    padding: 10px 16px;
    background: hsl(0, 0%, 96%);
    border: 1px solid hsl(214, 32%, 91%);
    border-radius: 8px;
    color: hsl(222.2, 84%, 4.9%);
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.15s ease;
}

#add-task-btn:hover {
    background: hsl(0, 0%, 90%);
    border-color: hsl(214, 32%, 85%);
}

#add-task-btn:disabled {
    background: rgba(0, 0, 0, 0.2);
    cursor: not-allowed;
}

/* Scrollbar styling */
::-webkit-scrollbar {
    width: 0px;
    /* Hide vertical scrollbar */
    height: 4px;
    /* Make horizontal scrollbar thin */
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.1);
    border-radius: 2px;
}

::-webkit-scrollbar-thumb:hover {
    background: rgba(0, 0, 0, 0.2);
}

/* Tabs specific scrollbar */
.tabs::-webkit-scrollbar {
    height: 0px;
    /* Hide horizontal scrollbar for tabs entirely */
}

/* Done Container */
.done-container {
    margin-top: 0;
    padding-top: 8px;
    padding-bottom: 16px;
    border-top: 1px solid rgba(0, 0, 0, 0.05);
    flex-shrink: 0;
    max-height: 120px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.done-heading {
    font-size: 14px;
    font-weight: 600;
    color: #666;
    margin: 0;
    padding: 0 16px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 24px;
    flex-shrink: 0;
    user-select: none;
}

.done-time-spent {
    font-size: 11px;
    color: #999;
    font-weight: normal;
    text-transform: none;
    margin: 0 auto;
}

.done-toggle {
    display: flex;
    align-items: center;
    cursor: pointer;
    gap: 6px;
    padding: 4px 0;
}

.chevron-icon {
    transition: transform 0.2s ease;
    color: #999;
}

.done-container.collapsed .chevron-icon {
    transform: rotate(-90deg);
}

.done-container.collapsed {
    height: auto;
    padding-bottom: 8px;
}

.done-container.collapsed .done-tasks {
    display: none;
}

.delete-all-btn {
    font-size: 12px;
    color: #999;
    background: transparent;
    border: none;
    cursor: pointer;
    padding: 4px 8px;
    border-radius: 4px;
    margin-right: 12px;
    transition: all 0.2s ease;
    font-weight: 500;
}

.delete-all-btn:hover {
    color: #ff4757;
    background: rgba(255, 71, 87, 0.1);
}

.done-tasks {
    padding: 0 16px;
    position: relative;
    overflow-y: auto;
    flex: 1;
    min-height: 0;
    max-height: 100%;
}

/* Footer */
.footer {
    position: fixed;
    bottom: 3px;
    left: 0;
    right: 0;
    text-align: center;
    padding: 8px 16px;
    font-size: 12px;
    color: #888;
    z-index: 100;
}

.footer .heart {
    color: #ff4757;
    font-size: 14px;
}

.footer a {
    color: inherit;
    text-decoration: none;
    font-weight: normal;
}

.footer a:hover {
    text-decoration: underline;
}

/* Modal Styles */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    backdrop-filter: blur(4px);
}

.modal-content {
    background: white;
    border-radius: 12px;
    padding: 24px;
    min-width: 300px;
    max-width: 400px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.modal-content h3 {
    margin: 0 0 16px 0;
    font-size: 16px;
    font-weight: 600;
    color: #333;
}

#tab-name-input {
    width: 100%;
    padding: 10px 12px;
    border: 2px solid rgba(0, 0, 0, 0.1);
    border-radius: 8px;
    font-size: 14px;
    outline: none;
    box-sizing: border-box;
}

#tab-name-input:focus {
    border-color: #667eea;
}

.modal-buttons {
    display: flex;
    gap: 8px;
    margin-top: 16px;
    justify-content: flex-end;
}

.modal-btn {
    padding: 8px 16px;
    border: none;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}

.cancel-btn {
    background: rgba(0, 0, 0, 0.1);
    color: #666;
}

.cancel-btn:hover {
    background: rgba(0, 0, 0, 0.2);
}

.create-btn {
    background: hsl(222.2, 84%, 4.9%);
    color: hsl(210, 40%, 98%);
    border: 1px solid hsl(222.2, 84%, 4.9%);
}

.create-btn:hover {
    background: hsl(222.2, 84%, 9%);
    border-color: hsl(222.2, 84%, 9%);
}

.delete-confirm-btn {
    background: #ef4444;
    color: white;
    border: 1px solid #ef4444;
}

.delete-confirm-btn:hover {
    background: #dc2626;
    border-color: #dc2626;
}

/* Focus Mode Styles */
#focus-mode {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: transparent;
    /* Let container handle background */
    /* backdrop-filter: blur(10px); */
    /* Moved to container */
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    /* Remove any padding */
}

.hidden {
    display: none !important;
}

.focus-container {
    width: 100%;
    /* height: 100%;  -- Remove fixed height to allow growth with notes? 
       Actually, standard focus mode is fixed height window. 
       But we rely on app.js resizing the window. 
       So width 100% is fine. Height auto? 
       The window has specific height set by Electron. 
       If we set height: 100%, it fills the window. 
       If content grows, window grows (via IPC). 
       So height 100% is fine. */
    height: 100%;
    max-width: none;
    min-width: 0;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border-radius: 0;
    display: flex;
    flex-direction: column;
    align-items: stretch;
    justify-content: flex-start;
    padding: 0;
    box-shadow: none;
    border: none;
    position: relative;
    cursor: grab;
    transition: all 0.3s ease;
}

.focus-bar {
    width: 100%;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 14px;
    position: relative;
    flex-shrink: 0;
}

/* Attention ring animation when focus mode opens */
.focus-container.attention-ring::after {
    content: '';
    position: absolute;
    inset: 2px;
    border-radius: 10px;
    pointer-events: none;
    box-sizing: border-box;
    border: 3px solid rgba(102, 126, 234, 0);
    /* #667eea */
    animation: attentionRing 900ms ease-out 1;
}

@keyframes attentionRing {
    0% {
        border-color: rgba(102, 126, 234, 0);
        box-shadow: 0 0 0 0 rgba(102, 126, 234, 0);
    }

    15% {
        border-color: rgba(102, 126, 234, 0.95);
        box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.35);
    }

    70% {
        border-color: rgba(102, 126, 234, 0.65);
        box-shadow: 0 0 0 6px rgba(102, 126, 234, 0.15);
    }

    100% {
        border-color: rgba(102, 126, 234, 0);
        box-shadow: 0 0 0 10px rgba(102, 126, 234, 0);
    }
}

/* Add a specific class for windowed mode if needed to restore rounded corners/shadow 
   but user asked for focus-container to take up ALL space of focus mode window whatever size it is.
   Since the window itself is frameless and small in focus mode, we want the container to fill it. */

/* However, we might want to keep the max-width constraint for the content inside? 
   No, the request is "focus-container to take up ALL the space". */


.focus-container.fullscreen {
    width: 100vw !important;
    height: 100vh !important;
    max-width: none !important;
    border-radius: 0;
    box-shadow: none;
    border: none;
    flex-direction: column;
    justify-content: center;
    gap: 0;
}

.focus-container.fullscreen .focus-bar {
    height: 100%;
    flex-direction: column;
    justify-content: center;
    padding: 0;
}

.focus-container.fullscreen .focus-task-name {
    font-size: 48px;
    text-align: center;
    margin-right: 0;
    white-space: normal;

    /* Split screen layout */
    flex: 0 0 50%;
    width: 100%;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    align-items: center;
    padding-bottom: 20px;
    padding-left: 40px;
    padding-right: 40px;
}

.focus-container.fullscreen .focus-timer {
    font-size: 96px;
    text-align: center;
    width: 100%;
    margin: 0;
    opacity: 1 !important;
    /* Always show timer in fullscreen */

    /* Split screen layout */
    flex: 0 0 50%;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
    padding-top: 20px;
}

/* In fullscreen mode, dock button group near the bottom-right */
.focus-container.fullscreen .focus-buttons-container {
    top: auto;
    bottom: 40px;
    right: 40px;
    transform: none;
    padding: 10px 12px;
    gap: 10px;
    border-radius: 24px;
}

.focus-container.fullscreen .complete-focus-btn,
.focus-container.fullscreen .fullscreen-focus-btn,
.focus-container.fullscreen .reset-focus-btn,
.focus-container.fullscreen .exit-focus-btn {
    width: 48px;
    height: 48px;
}

.focus-container.fullscreen .complete-focus-btn svg,
.focus-container.fullscreen .fullscreen-focus-btn svg,
.focus-container.fullscreen .reset-focus-btn svg,
.focus-container.fullscreen .exit-focus-btn svg {
    width: 27px;
    height: 27px;
}

.focus-container.fullscreen .complete-focus-btn:hover,
.focus-container.fullscreen .fullscreen-focus-btn:hover,
.focus-container.fullscreen .reset-focus-btn:hover,
.focus-container.fullscreen .exit-focus-btn:hover {
    transform: scale(1.05);
}

.focus-container:active {
    cursor: default;
}

.focus-bar:hover .focus-timer {
    opacity: 0;
}

.focus-buttons-container {
    position: absolute;
    top: 50%;
    right: 14px;
    transform: translateY(-50%);
    display: flex;
    gap: 4px;
    padding: 4px;
    border-radius: 12px;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
    opacity: 0;
    transition: opacity 0.2s ease;
    pointer-events: none;
    -webkit-app-region: no-drag;
}

.focus-bar:hover .focus-buttons-container {
    opacity: 1;
    pointer-events: auto;
}

.complete-focus-btn,
.fullscreen-focus-btn,
.reset-focus-btn,
.complete-focus-btn,
.notes-focus-btn,
.fullscreen-focus-btn,
.reset-focus-btn,
.exit-focus-btn {
    position: relative;
    width: 32px;
    height: 32px;
    border: none;
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.95);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.15s ease, transform 0.15s ease;
    padding: 0;
    color: #666;
    -webkit-app-region: no-drag;
    outline: none;
}

.complete-focus-btn:focus,
.fullscreen-focus-btn:focus,
.reset-focus-btn:focus,
.complete-focus-btn:focus,
.notes-focus-btn:focus,
.fullscreen-focus-btn:focus,
.reset-focus-btn:focus,
.exit-focus-btn:focus {
    outline: none;
}

.complete-focus-btn {
    color: #16a34a;
}

.fullscreen-focus-btn {
    color: #667eea;
}

.reset-focus-btn {
    color: #f59e0b;
}

.complete-focus-btn:hover,
.notes-focus-btn:hover,
.fullscreen-focus-btn:hover,
.reset-focus-btn:hover,
.exit-focus-btn:hover {
    background: rgba(0, 0, 0, 0.05);
    transform: scale(1.05);
}

.focus-task-name {
    color: #333;
    font-size: 18px;
    font-weight: 400;
    flex: 1;
    text-align: left;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-right: 8px;
}

.focus-task-name.completed {
    text-decoration: line-through;
    opacity: 0.6;
}

.focus-timer {
    font-size: 18px;
    font-weight: 600;
    color: #333;
    text-align: right;
    -webkit-app-region: no-drag;
    flex-shrink: 0;
    width: auto;
    /* Allow timer to take only needed space */
    min-width: 90px;
    /* Minimum width to prevent jumping */
    margin-left: auto;
    transition: opacity 0.2s ease;
}

/* Focus Mode Toast */
.focus-toast {
    position: absolute;
    left: 14px;
    /* Align with left padding */
    top: 50%;
    transform: translateY(-50%);
    background: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 6px 14px;
    border-radius: 6px;
    font-size: 13px;
    pointer-events: auto;
    opacity: 0;
    transition: opacity 0.3s ease;
    z-index: 100;
    display: flex;
    align-items: center;
    gap: 12px;
}

.focus-toast.visible {
    opacity: 1;
}

#focus-undo-btn {
    background: #ffffff;
    border: 1px solid #e5e7eb;
    color: #0f172a;
    font-weight: 500;
    font-size: 12px;
    cursor: pointer;
    padding: 4px 10px;
    border-radius: 4px;
    text-decoration: none;
    transition: all 0.2s ease;
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
}

#focus-undo-btn:hover {
    background: #f8fafc;
    color: #0f172a;
    border-color: #cbd5e1;
}

/* Focus Mode Notes Button */
.notes-focus-btn {
    color: #64748b;
}

.notes-focus-btn.has-notes {
    color: #334155;
}

.notes-focus-btn.active {
    background: rgba(0, 0, 0, 0.08);
    color: #334155;
}

/* Focus Mode Notes Container */
.focus-notes-container {
    width: 100%;
    padding: 0 14px 0 14px;
    background: rgba(255, 255, 255, 0.95);
    margin-bottom: 0;
}

.focus-notes-container.hidden {
    display: none;
}

.focus-notes-editor-wrapper {
    background: #f8fafc;
    border-radius: 6px;
    position: relative;
    -webkit-app-region: no-drag;
}



.focus-notes-editor-wrapper .ql-toolbar.ql-snow {
    display: none;
    border: none !important;
    border-bottom: 1px solid #e2e8f0 !important;
    padding: 4px 8px !important;
    padding-right: 40px !important;
    background: #f1f5f9;
    position: relative;
}

.focus-notes-editor-wrapper.active .ql-toolbar.ql-snow {
    display: block;
}

.focus-notes-editor-wrapper .ql-container.ql-snow {
    border: none !important;
    font-size: 14px !important;
}

.focus-notes-editor-wrapper .ql-editor {
    min-height: 20px;
    padding-bottom: 12px;
    max-height: 200px;
    overflow-y: auto;
    padding: 12px !important;
    color: #334155;
}

.focus-notes-editor-wrapper .notes-done-btn {
    display: none;
}

.focus-notes-editor-wrapper.active .notes-done-btn {
    display: flex;
}

.focus-timer.overtime {
    color: #ef4444;
}

/* Basecamp Settings */
.settings-section {
    margin-bottom: 24px;
}

.settings-section h4 {
    font-size: 14px;
    font-weight: 600;
    color: #333;
    margin-bottom: 0;
    /* Removed default margin, controlled by parent layout */
}

.settings-desc {
    font-size: 13px;
    color: #666;
    margin-bottom: 16px;
}

.settings-desc a {
    color: #667eea;
    text-decoration: none;
}

.settings-desc a:hover {
    text-decoration: underline;
}

/* Info Toggle Button */
.info-toggle-btn {
    background: transparent;
    border: none;
    color: #999;
    cursor: pointer;
    padding: 4px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    flex-shrink: 0;
}

.info-toggle-btn:hover {
    color: #666;
    background: rgba(0, 0, 0, 0.05);
}

.info-toggle-btn:focus {
    outline: 2px solid #999;
    outline-offset: 2px;
}

.info-toggle-btn[aria-expanded="true"] {
    color: #666;
}

/* Expandable Info Text */
.info-expandable {
    margin-top: 8px;
    margin-bottom: 12px;
    padding: 8px 12px;
    background: rgba(0, 0, 0, 0.03);
    border-radius: 6px;
    overflow: hidden;
    transition: all 0.2s ease;
}

.info-expandable.hidden {
    display: none;
}

.settings-input {
    width: 100%;
    padding: 8px;
    margin-bottom: 8px;
    border: 1px solid #ddd;
    border-radius: 6px;
    font-size: 13px;
}

.settings-input:focus {
    border-color: #667eea;
    outline: none;
}

.help-text {
    font-size: 11px;
    color: #999;
    margin-top: 8px;
}

.help-text a {
    color: #667eea;
    text-decoration: none;
}

.help-text a:hover {
    text-decoration: underline;
}

.connect-btn {
    background: #2ecc71;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    font-weight: 500;
    cursor: pointer;
    font-size: 14px;
    transition: background 0.2s ease;
    width: 100%;
}

.connect-btn:hover {
    background: #27ae60;
}

#oauth-connect-btn,
#connect-bc-btn {
    background-color: #ffe004;
    color: #333;
}

#oauth-connect-btn:hover,
#connect-bc-btn:hover {
    background-color: #e6c800;
}

.disconnect-btn {
    background: transparent;
    color: #ef4444;
    border: 1px solid #ef4444;
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 13px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.disconnect-btn:hover {
    background: rgba(239, 68, 68, 0.1);
}

.connection-status {
    display: flex;
    align-items: center;
    font-size: 13px;
    color: #333;
    margin-bottom: 12px;
}

.status-dot {
    width: 8px;
    height: 8px;
    background: #2ecc71;
    border-radius: 50%;
    margin-right: 8px;
}

/* Basecamp Selection in Modal */
.basecamp-selection {
    margin-top: 16px;
    padding-top: 16px;
    border-top: 1px solid #eee;
}

.bc-label {
    font-size: 13px;
    font-weight: 500;
    color: #333;
    margin-bottom: 8px;
}

.bc-select {
    width: 100%;
    padding: 8px;
    border: 1px solid #ddd;
    border-radius: 6px;
    font-size: 13px;
    margin-bottom: 8px;
    background: white;
}

.bc-select:focus {
    border-color: #667eea;
    outline: none;
}

/* Sync Button */
.sync-btn {
    width: 24px;
    height: 24px;
    border: none;
    background: transparent;
    color: #999;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    margin-left: 8px;
}

.sync-btn:hover {
    color: #667eea;
    background: rgba(102, 126, 234, 0.1);
    border-radius: 4px;
}

.sync-btn.spinning svg {
    animation: spin 1s linear infinite;
}

@keyframes spin {
    from {
        transform: rotate(0deg);
    }

    to {
        transform: rotate(360deg);
    }
}

.sync-btn.disconnected {
    color: #e5a00d;
    position: relative;
}

.sync-btn.disconnected::after {
    content: '!';
    position: absolute;
    top: -2px;
    right: -2px;
    width: 12px;
    height: 12px;
    background: #e5a00d;
    color: white;
    font-size: 9px;
    font-weight: bold;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
}

.sync-btn.disconnected:hover {
    color: #c4870a;
    background: rgba(229, 160, 13, 0.1);
}

/* Resizer Handle */
.add-task-resizer {
    position: absolute;
    top: -6px;
    left: 0;
    right: 0;
    height: 12px;
    cursor: row-resize;
    z-index: 20;
    display: flex;
    justify-content: center;
    align-items: center;
    opacity: 0;
    transition: opacity 0.2s ease;
}

.add-task-resizer:hover,
.add-task-resizer.dragging {
    opacity: 1;
}

.add-task-resizer::after {
    content: '';
    width: 32px;
    height: 4px;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 2px;
}

/* Undo Toast */
.undo-toast {
    position: fixed;
    bottom: 32px;
    left: 50%;
    transform: translateX(-50%);
    background: #333;
    color: white;
    padding: 12px 24px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    gap: 16px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    z-index: 2000;
    font-size: 14px;
    animation: slideUp 0.3s ease;
}

.undo-toast.hidden {
    display: none;
}

@keyframes slideUp {
    from {
        transform: translate(-50%, 100%);
        opacity: 0;
    }

    to {
        transform: translate(-50%, 0);
        opacity: 1;
    }
}

.undo-btn {
    background: transparent;
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: white;
    padding: 4px 12px;
    border-radius: 4px;
    cursor: pointer;
    font-weight: 500;
    transition: all 0.2s ease;
}

.undo-btn:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.6);
}

.close-undo-btn {
    background: transparent;
    border: none;
    color: rgba(255, 255, 255, 0.6);
    font-size: 18px;
    cursor: pointer;
    padding: 0 4px;
    line-height: 1;
}

.close-undo-btn:hover {
    color: white;
}

/* Connect/Disconnect Buttons */
.connect-btn {
    background: #4CAF50;
    color: white;
    border: none;
    padding: 10px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    transition: all 0.2s ease;
    width: 100%;
}

.connect-btn:hover {
    background: #45a049;
}

/* Apple Reminders specific button style */
#reminders-connect-btn {
    background: white;
    color: #09090b;
    /* shadcn-like text color */
    border: 1px solid #e4e4e7;
    /* shadcn-like border color */
}

#reminders-connect-btn:hover {
    background: #f4f4f5;
    /* shadcn-like hover bg */
    color: #18181b;
}

.disconnect-btn {
    background: transparent;
    color: #ff4444;
    border: 1px solid #ff4444;
    padding: 8px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 13px;
    margin-top: 10px;
    transition: all 0.2s ease;
    width: 100%;
}

.disconnect-btn:hover {
    background: rgba(255, 68, 68, 0.1);
}

/* Apple Reminders specific button style */
#reminders-connect-btn {
    background: white;
    color: #09090b;
    /* shadcn-like text color */
    border: 1px solid #e4e4e7;
    /* shadcn-like border color */
}

#reminders-connect-btn:hover {
    background: #f4f4f5;
    /* shadcn-like hover bg */
    color: #18181b;
}

.disconnect-btn {
    background: transparent;
    color: #ff4444;
    border: 1px solid #ff4444;
    padding: 8px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 13px;
    margin-top: 10px;
    transition: all 0.2s ease;
    width: 100%;
}

.disconnect-btn:hover {
    background: rgba(255, 68, 68, 0.1);
}

.manual-update-btn {
    position: relative;
    width: 36px;
    height: 36px;
    border: 1px solid rgba(0, 0, 0, 0.1);
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.95);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.15s ease, transform 0.15s ease;
    padding: 0;
    color: #666;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

.manual-update-btn:hover {
    background: rgba(0, 0, 0, 0.05);
    transform: scale(1.05);
}

.focus-like-btn {
    background: hsl(222.2, 84%, 4.9%);
    color: hsl(210, 40%, 98%);
    border: 1px solid hsl(222.2, 84%, 4.9%);
}

.focus-like-btn:hover {
    background: hsl(222.2, 84%, 9%);
    border-color: hsl(222.2, 84%, 9%);
}